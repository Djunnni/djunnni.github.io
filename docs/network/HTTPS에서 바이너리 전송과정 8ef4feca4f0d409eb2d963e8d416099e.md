---
id: 12
title: HTTPS 바이너리 전송과정
tags:
  - Network
description: HTTPS 바이너리 전송과정에 대해 알아보자.
---

# HTTPS에서 바이너리 전송과정

- ChatGPT에게 물어보기
    
    ![스크린샷 2023-02-22 오후 7.46.53.png](././HTTPS%E1%84%8B%E1%85%A6%E1%84%89%E1%85%A5%20%E1%84%87%E1%85%A1%E1%84%8B%E1%85%B5%E1%84%82%E1%85%A5%E1%84%85%E1%85%B5%20%E1%84%8C%E1%85%A5%E1%86%AB%E1%84%89%E1%85%A9%E1%86%BC%E1%84%80%E1%85%AA%E1%84%8C%E1%85%A5%E1%86%BC%208ef4feca4f0d409eb2d963e8d416099e/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-02-22_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_7.46.53.png)
    

### HTTP, HTTPS 공통점과 차이점

- 공통점
    - 파일 전송을 위한 프로토콜
    - 클라이언트가 서버에게 요청, 클라이언트에게 서버가 파일을 전송
- 차이점
    - HTTPS는 SSL, TLS 프로토콜로 암호화가 되어있어 데이터를 쉽게 탈취하지 못함
    - WireShark를 활용한 HTTP, HTTPS 차이 보기
        
        ![스크린샷 2023-02-22 오후 8.05.54.png](./HTTPS%E1%84%8B%E1%85%A6%E1%84%89%E1%85%A5%20%E1%84%87%E1%85%A1%E1%84%8B%E1%85%B5%E1%84%82%E1%85%A5%E1%84%85%E1%85%B5%20%E1%84%8C%E1%85%A5%E1%86%AB%E1%84%89%E1%85%A9%E1%86%BC%E1%84%80%E1%85%AA%E1%84%8C%E1%85%A5%E1%86%BC%208ef4feca4f0d409eb2d963e8d416099e/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-02-22_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_8.05.54.png)
        
        ![스크린샷 2023-02-22 오후 8.06.17.png](./HTTPS%E1%84%8B%E1%85%A6%E1%84%89%E1%85%A5%20%E1%84%87%E1%85%A1%E1%84%8B%E1%85%B5%E1%84%82%E1%85%A5%E1%84%85%E1%85%B5%20%E1%84%8C%E1%85%A5%E1%86%AB%E1%84%89%E1%85%A9%E1%86%BC%E1%84%80%E1%85%AA%E1%84%8C%E1%85%A5%E1%86%BC%208ef4feca4f0d409eb2d963e8d416099e/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-02-22_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_8.06.17.png)
        
        ![스크린샷 2023-02-22 오후 8.02.00.png](./HTTPS%E1%84%8B%E1%85%A6%E1%84%89%E1%85%A5%20%E1%84%87%E1%85%A1%E1%84%8B%E1%85%B5%E1%84%82%E1%85%A5%E1%84%85%E1%85%B5%20%E1%84%8C%E1%85%A5%E1%86%AB%E1%84%89%E1%85%A9%E1%86%BC%E1%84%80%E1%85%AA%E1%84%8C%E1%85%A5%E1%86%BC%208ef4feca4f0d409eb2d963e8d416099e/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-02-22_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_8.02.00.png)
        

### HTTPS 파일 전송

- 암호화 검증과정
    
    ![스크린샷 2023-02-22 오후 9.13.41.png](./HTTPS%E1%84%8B%E1%85%A6%E1%84%89%E1%85%A5%20%E1%84%87%E1%85%A1%E1%84%8B%E1%85%B5%E1%84%82%E1%85%A5%E1%84%85%E1%85%B5%20%E1%84%8C%E1%85%A5%E1%86%AB%E1%84%89%E1%85%A9%E1%86%BC%E1%84%80%E1%85%AA%E1%84%8C%E1%85%A5%E1%86%BC%208ef4feca4f0d409eb2d963e8d416099e/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-02-22_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_9.13.41.png)
    
- 전송과정
    - 클라라이언트는 HTTPS를 활용해 서버에게 보낸다. (TLS/SSL 암호화 됨)
    - 서버는 요청을 받고 파일을 찾아 암호화된 데이터를 클라이언트로 전달
    - 클라이언트에서 수신하고 대칭키를 사용해 데이터를 복호화한다.

![스크린샷 2023-02-22 오후 8.26.14.png](./HTTPS%E1%84%8B%E1%85%A6%E1%84%89%E1%85%A5%20%E1%84%87%E1%85%A1%E1%84%8B%E1%85%B5%E1%84%82%E1%85%A5%E1%84%85%E1%85%B5%20%E1%84%8C%E1%85%A5%E1%86%AB%E1%84%89%E1%85%A9%E1%86%BC%E1%84%80%E1%85%AA%E1%84%8C%E1%85%A5%E1%86%BC%208ef4feca4f0d409eb2d963e8d416099e/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-02-22_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_8.26.14.png)

![스크린샷 2023-02-22 오후 8.16.47.png](./HTTPS%E1%84%8B%E1%85%A6%E1%84%89%E1%85%A5%20%E1%84%87%E1%85%A1%E1%84%8B%E1%85%B5%E1%84%82%E1%85%A5%E1%84%85%E1%85%B5%20%E1%84%8C%E1%85%A5%E1%86%AB%E1%84%89%E1%85%A9%E1%86%BC%E1%84%80%E1%85%AA%E1%84%8C%E1%85%A5%E1%86%BC%208ef4feca4f0d409eb2d963e8d416099e/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-02-22_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_8.16.47.png)

- 상세 처리 과정
    
    1) Client Hello(Client → Server)
    
    - 자신이 사용할 SSL 버전 정보, Chiper suite list[대칭키암호화 시스템 + 공개키 암호화 시스템 + 해시함수], 클라이언트 난수 생성후 전달
    - ChiperSuit List
        
        ![스크린샷 2023-02-22 오후 9.25.44.png](./HTTPS%E1%84%8B%E1%85%A6%E1%84%89%E1%85%A5%20%E1%84%87%E1%85%A1%E1%84%8B%E1%85%B5%E1%84%82%E1%85%A5%E1%84%85%E1%85%B5%20%E1%84%8C%E1%85%A5%E1%86%AB%E1%84%89%E1%85%A9%E1%86%BC%E1%84%80%E1%85%AA%E1%84%8C%E1%85%A5%E1%86%BC%208ef4feca4f0d409eb2d963e8d416099e/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-02-22_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_9.25.44.png)
        
        ![스크린샷 2023-02-22 오후 9.25.12.png](./HTTPS%E1%84%8B%E1%85%A6%E1%84%89%E1%85%A5%20%E1%84%87%E1%85%A1%E1%84%8B%E1%85%B5%E1%84%82%E1%85%A5%E1%84%85%E1%85%B5%20%E1%84%8C%E1%85%A5%E1%86%AB%E1%84%89%E1%85%A9%E1%86%BC%E1%84%80%E1%85%AA%E1%84%8C%E1%85%A5%E1%86%BC%208ef4feca4f0d409eb2d963e8d416099e/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-02-22_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_9.25.12.png)
        
    
    2) Server Hello(Server → Client)
    
    - 암호화 방법을 선택하고 서버난수를 생성해서 보낸다.
        
        ![스크린샷 2023-02-22 오후 9.26.20.png](./HTTPS%E1%84%8B%E1%85%A6%E1%84%89%E1%85%A5%20%E1%84%87%E1%85%A1%E1%84%8B%E1%85%B5%E1%84%82%E1%85%A5%E1%84%85%E1%85%B5%20%E1%84%8C%E1%85%A5%E1%86%AB%E1%84%89%E1%85%A9%E1%86%BC%E1%84%80%E1%85%AA%E1%84%8C%E1%85%A5%E1%86%BC%208ef4feca4f0d409eb2d963e8d416099e/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-02-22_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_9.26.20.png)
        
    
    3) Certificate (Server → Client)
    
    - 클라이언트는 CA의 공개키로 이 인증서를 해독해 서버의 공개키를 획득한다.
    - 이미지
        
        ![스크린샷 2023-02-22 오후 9.28.16.png](./HTTPS%E1%84%8B%E1%85%A6%E1%84%89%E1%85%A5%20%E1%84%87%E1%85%A1%E1%84%8B%E1%85%B5%E1%84%82%E1%85%A5%E1%84%85%E1%85%B5%20%E1%84%8C%E1%85%A5%E1%86%AB%E1%84%89%E1%85%A9%E1%86%BC%E1%84%80%E1%85%AA%E1%84%8C%E1%85%A5%E1%86%BC%208ef4feca4f0d409eb2d963e8d416099e/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-02-22_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_9.28.16.png)
        
    - 클라이언트는 클라이언트와 서버의 난수를 각각 사용해 Pre-Master-Secret(난수값) 생성
    - PMS를 서버의 공개키로 암호화 해 서버에게 보내면 서버는 개인키를 활용해 암호문을 복호화 한다.
    - 암호문이 복호화가 재대로 이루어지면 서버는 클라이언트에게 인증할 수 있다.
    
    4) Server Key Exchange(Server → Client)
    
    - 인증서가 없거나 인증서가 서명용으로만 사용되어질 때 해당 메시지를 보낸다.
    - 인증서 내부에 공개키가 있다면 Client가 CA 공개키를 통해 인증서를 복호화한 후 Server 공개키를 확보할 수 있음
    
    5) Server hello Done(Server → Client)
    
    - 서버가 클라이언트에게 보낼 메시지를 모두 보냈음을 의미
    
    6) Client Key Exchange(Client → Server)
    
    - PMS, 대칭 암호화키, 메시지 인증코드에 사용되는 46byte의 난수, 서버의 공개키로 만든 암호등이 포함
    
    7) Change Cipher Spec(Client→ Server)
    
    - 이후에 전송되는 모든 메시지는 서버와 협상된 알고리즘과 키를 이용해 암호화 시키겠다고 서버에 알림
    
    8) Encrypted HandShake Message(Finished)
    
    - 서버도 handShake가 성공적으로 완료됨을 알림. 지금부터 각자의 동일한 대칭키를 사용해 데이터를 암호화해 전송하거나 데이터를 복호화함.
    
    9) Application Data
    
    서로 상대방에게 전송할 데이터를 암호화 해서 전송
    

### 정리하자면!

![스크린샷 2023-02-22 오후 9.20.45.png](./HTTPS%E1%84%8B%E1%85%A6%E1%84%89%E1%85%A5%20%E1%84%87%E1%85%A1%E1%84%8B%E1%85%B5%E1%84%82%E1%85%A5%E1%84%85%E1%85%B5%20%E1%84%8C%E1%85%A5%E1%86%AB%E1%84%89%E1%85%A9%E1%86%BC%E1%84%80%E1%85%AA%E1%84%8C%E1%85%A5%E1%86%BC%208ef4feca4f0d409eb2d963e8d416099e/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-02-22_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_9.20.45.png)

### 참고

[https://aws-hyoh.tistory.com/34](https://aws-hyoh.tistory.com/34)

[https://aws-hyoh.tistory.com/entry/HTTPS-통신과정-쉽게-이해하기-3SSL-Handshake](https://aws-hyoh.tistory.com/entry/HTTPS-%ED%86%B5%EC%8B%A0%EA%B3%BC%EC%A0%95-%EC%89%BD%EA%B2%8C-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0-3SSL-Handshake)

[https://velog.io/@kaitlin_k/HTTPS-이해하기](https://velog.io/@kaitlin_k/HTTPS-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0)