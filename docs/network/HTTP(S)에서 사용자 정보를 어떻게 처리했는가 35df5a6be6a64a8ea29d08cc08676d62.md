---
id: 12
title: HTTP(S)에서 사용자 정보를 어떻게 처리했는가
tags:
  - Network
description: HTTP(S)에서 사용자 정보를 어떻게 처리했는지 알아보자.
---

# HTTP(S)에서 사용자 정보를 어떻게 처리했는가?

> HTTP 는 Stateless (상태가 없는) 통신 프로토콜이라고 합니다. 따라서, 상태가 없다면 가령 HTTP 를 쓰는 서비스는 매번 로그인을 해 줘야 하거나 사용자 정보를 저장하는 일이 불가능합니다. 그런데 실제론 그렇지 않죠. 어떻게 이런 불편함을 해소했을까요?
> 

### HTTP의 특징

---

- 비연결성
    - 클라이언트가 요청을 하면 서버는 적합한 응답을 하면서 연결을 끊는 성질
- 무상태
    - 비연결적인 특성으로 연결이 해제되면 서버는 클라이언트가 이전에 요청한 결과에 대해 잊어버린다.
    - 클라이언트가 이전과 같은 데이터를 원한다고 해도 다시 서버에 연결해 동일한 요청을 시도해야한다

### 로그인이나 사용자 정보 어떻게 저장하나?

---

### 쿠키(Cookie)

![스크린샷 2023-02-21 오전 12.45.45.png](./HTTP(S)%E1%84%8B%E1%85%A6%E1%84%89%E1%85%A5%20%E1%84%89%E1%85%A1%E1%84%8B%E1%85%AD%E1%86%BC%E1%84%8C%E1%85%A1%20%E1%84%8C%E1%85%A5%E1%86%BC%E1%84%87%E1%85%A9%E1%84%85%E1%85%B3%E1%86%AF%20%E1%84%8B%E1%85%A5%E1%84%84%E1%85%A5%E1%87%82%E1%84%80%E1%85%A6%20%E1%84%8E%E1%85%A5%E1%84%85%E1%85%B5%E1%84%92%E1%85%A2%E1%86%BB%E1%84%82%E1%85%B3%E1%86%AB%E1%84%80%E1%85%A1%2035df5a6be6a64a8ea29d08cc08676d62/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-02-21_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB_12.45.45.png)

- 특징
    - 웹 브라우저에 저장(최대 4kb)
    - key - value로 구성
    - 유효시간 설정이 가능하며 특정시간이 지나면 소멸
- 사용 목적
    - 세션관리, 개인화(Facebook 등 광고에서 개인화), 트래킹(GA)
- 단점
    - 네트워크 부하가 있음(쿠키 크기가 클 경우)
    - Header의 Cookie로 전달 되어 중간에 쿠키 탈취가 가능하다.
- 장점
    - 서버에서는 저장공간이 절약된다.

### 세션(Session)

![스크린샷 2023-02-21 오전 12.46.13.png](./HTTP(S)%E1%84%8B%E1%85%A6%E1%84%89%E1%85%A5%20%E1%84%89%E1%85%A1%E1%84%8B%E1%85%AD%E1%86%BC%E1%84%8C%E1%85%A1%20%E1%84%8C%E1%85%A5%E1%86%BC%E1%84%87%E1%85%A9%E1%84%85%E1%85%B3%E1%86%AF%20%E1%84%8B%E1%85%A5%E1%84%84%E1%85%A5%E1%87%82%E1%84%80%E1%85%A6%20%E1%84%8E%E1%85%A5%E1%84%85%E1%85%B5%E1%84%92%E1%85%A2%E1%86%BB%E1%84%82%E1%85%B3%E1%86%AB%E1%84%80%E1%85%A1%2035df5a6be6a64a8ea29d08cc08676d62/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-02-21_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB_12.46.13.png)

- 특징
    - 서버에 저장되며 고유한 SessionID를 생성한 후 쿠키로 기록
    - 용량 제한 없음
- 장점
    - SessionID만 사용하기에 보안 유지가 된다.(ID 탈취도 가능하지만 IP 특정을 통해 해결가능)
- 단점
    - 서버에서 세션에 대한 데이터를 저장하므로 세션 양이 많을 수록 부하가 커짐(메모리 사용량이 커짐)
        
        

### JWT(Json Web Tokens)

![스크린샷 2023-02-21 오전 12.47.45.png](./HTTP(S)%E1%84%8B%E1%85%A6%E1%84%89%E1%85%A5%20%E1%84%89%E1%85%A1%E1%84%8B%E1%85%AD%E1%86%BC%E1%84%8C%E1%85%A1%20%E1%84%8C%E1%85%A5%E1%86%BC%E1%84%87%E1%85%A9%E1%84%85%E1%85%B3%E1%86%AF%20%E1%84%8B%E1%85%A5%E1%84%84%E1%85%A5%E1%87%82%E1%84%80%E1%85%A6%20%E1%84%8E%E1%85%A5%E1%84%85%E1%85%B5%E1%84%92%E1%85%A2%E1%86%BB%E1%84%82%E1%85%B3%E1%86%AB%E1%84%80%E1%85%A1%2035df5a6be6a64a8ea29d08cc08676d62/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-02-21_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB_12.47.45.png)

- 특징
    - 정보보호 목적이 아닌 위조 방지의 목적이다.
    - JSON 토큰으로 이루어져 Header, Payload, Signature로 구성되어 있다.
        
        ![스크린샷 2023-02-21 오전 12.50.34.png](./HTTP(S)%E1%84%8B%E1%85%A6%E1%84%89%E1%85%A5%20%E1%84%89%E1%85%A1%E1%84%8B%E1%85%AD%E1%86%BC%E1%84%8C%E1%85%A1%20%E1%84%8C%E1%85%A5%E1%86%BC%E1%84%87%E1%85%A9%E1%84%85%E1%85%B3%E1%86%AF%20%E1%84%8B%E1%85%A5%E1%84%84%E1%85%A5%E1%87%82%E1%84%80%E1%85%A6%20%E1%84%8E%E1%85%A5%E1%84%85%E1%85%B5%E1%84%92%E1%85%A2%E1%86%BB%E1%84%82%E1%85%B3%E1%86%AB%E1%84%80%E1%85%A1%2035df5a6be6a64a8ea29d08cc08676d62/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-02-21_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB_12.50.34.png)
        
    - 
- 장점
    - 서버에서 따로 클라이언트를 위한 메모리나 공간을 사용하지 않는다.
    - header와 payload를 가지고 signature를 생성하므로 데이터 위변조를 막는다.
    - 서버 확장성이 우수하다(무상태로 인해)
- 단점
    - 쿠키/세션과 달리 데이터 길이가 길어, 인증요청이 많을 수록 부하가 심해질 수 있음.
    - 토큰을 탈취당하면 대처가 어렵다(사용기간 제한을 통해 극복)

![스크린샷 2023-02-21 오전 12.51.17.png](./HTTP(S)%E1%84%8B%E1%85%A6%E1%84%89%E1%85%A5%20%E1%84%89%E1%85%A1%E1%84%8B%E1%85%AD%E1%86%BC%E1%84%8C%E1%85%A1%20%E1%84%8C%E1%85%A5%E1%86%BC%E1%84%87%E1%85%A9%E1%84%85%E1%85%B3%E1%86%AF%20%E1%84%8B%E1%85%A5%E1%84%84%E1%85%A5%E1%87%82%E1%84%80%E1%85%A6%20%E1%84%8E%E1%85%A5%E1%84%85%E1%85%B5%E1%84%92%E1%85%A2%E1%86%BB%E1%84%82%E1%85%B3%E1%86%AB%E1%84%80%E1%85%A1%2035df5a6be6a64a8ea29d08cc08676d62/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-02-21_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB_12.51.17.png)

### 참고

[https://hyuntaeknote.tistory.com/6](https://hyuntaeknote.tistory.com/6)

[https://hyuntaeknote.tistory.com/3](https://hyuntaeknote.tistory.com/3)

[https://interconnection.tistory.com/74](https://interconnection.tistory.com/74)

[https://jwt.io/](https://jwt.io/)

### 정리하기

- HTTP는 **비연결성, 무상태**의 특징을 가지고 있다.
- 브라우저는 로그인과 같은 유저 상태를 저장하기위해 3가지 방법을 이용한다.
    - **Cookie, Session, JWT**
- 쿠키와 세션을 비교하고 더 나아간 방식에 대해 말하시오
    - 쿠키는 키-밸류 형식을 가지며 브라우저에 저장됩니다. 브라우저의 정책에 따라 크기가 4kb까지 저장 가능합니다. 서버로 요청 시 헤더정보에 포함되어 노출이 되어있습니다.
    - 세션은 서버에 필요한 정보들을 저장하며 sessionID를 통해 클라이언트를 찾습니다. 주로 redis나 memcache를 활용합니다. 많은 고객이 유입시 세션 서버의 메모리를 점검해야 합니다.
    - 세션에서는 인증처리하는 작업이다보니 서버가 light해질 수 있는 방안을 모색했습니다.
        
        그 결과  JWT가 등장했습니다. JWT 토큰을 통해 인가를 위한 간단한 정보를 payload로 저장하고 서명을 통해 validation을 확인합니다. 서버는 매 요청에 따라 추가 로직처리 없이 정보를 꺼내 활용할 수 있습니다. 다만 요청 데이터가 크다는 단점이 있습니다.