<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-database/1">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">1. MySQL 아키텍쳐 | Djunnni</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://djunnni.github.io/docs/database/1"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="1. MySQL 아키텍쳐 | Djunnni"><meta data-rh="true" name="description" content="MySQL8.0 서적의 4장 아키텍쳐에 대한 정리와 이해"><meta data-rh="true" property="og:description" content="MySQL8.0 서적의 4장 아키텍쳐에 대한 정리와 이해"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://djunnni.github.io/docs/database/1"><link data-rh="true" rel="alternate" href="https://djunnni.github.io/docs/database/1" hreflang="en"><link data-rh="true" rel="alternate" href="https://djunnni.github.io/docs/database/1" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Djunnni RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Djunnni Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-4FF73XFEFX"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-4FF73XFEFX",{anonymize_ip:!0})</script><link rel="stylesheet" href="/assets/css/styles.8935d4c5.css">
<link rel="preload" href="/assets/js/runtime~main.e1836221.js" as="script">
<link rel="preload" href="/assets/js/main.d730b149.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="https://github.com/djunnni.png" alt="Djunnni github logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="https://github.com/djunnni.png" alt="Djunnni github logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Djunnni</b></a><a class="navbar__item navbar__link" href="/blog">Blog</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Tech</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/djunnni" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/jpa">JPA</a><button aria-label="Toggle the collapsible sidebar category &#x27;JPA&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/데이터베이스">데이터베이스</a><button aria-label="Toggle the collapsible sidebar category &#x27;데이터베이스&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/database/1">1. MySQL 아키텍쳐</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/네트워크">네트워크</a><button aria-label="Toggle the collapsible sidebar category &#x27;네트워크&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/데이터베이스"><span itemprop="name">데이터베이스</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">1. MySQL 아키텍쳐</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>MySQL 아키텍쳐</h1><blockquote><p><strong>MySQL 서버에 대해서 구성을 이해하고 SQL쿼리를 처리하는 과정에서 MySQL엔진이 담당하는 업무인지, 스토리지 엔진이 담당하는 업무인지 구분지어서 이해하라!</strong></p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mysql의-구성도">MySQL의 구성도<a class="hash-link" href="#mysql의-구성도" title="Direct link to heading">​</a></h3><p>MySQL 서버 = MySQL 엔진 + 스토리지 엔진</p><p><img loading="lazy" alt="IMG_3426.jpg" src="/assets/images/IMG_3426-683648edf87a0acf60e9745c81d3ac34.jpg" width="2698" height="2888" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mysql-엔진">MySQL 엔진<a class="hash-link" href="#mysql-엔진" title="Direct link to heading">​</a></h3><p>MySQL엔진은 클라이언트로 부터 접속 및 쿼리 요청을 처리하는 커넥션 핸들러</p><p>SQL 파서, 전처리기(캐시 및 버퍼), 쿼리의 최적화된 실행을 위한 옵티마이저가 중심</p><p>표준 ANSI SQL 문법을 지원하고 있어 표준 문법으로 작성된 쿼리는 타 DBMS와 호환이 가능함.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="스토리지-엔진">스토리지 엔진<a class="hash-link" href="#스토리지-엔진" title="Direct link to heading">​</a></h3><p>실제 데이터를 디스크 스토리지에 저장하거나 디스크 스토리지로부터 데이터를 읽어오는 부분을 전담한다. (RW 역할)</p><p>MySQL 서버에서는 MySQL엔진 1개, 스토리지엔진 N개를 사용할 수 있다.</p><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">create table </span><span class="token function" style="color:#d73a49">student</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"> id int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">TABLE</span><span class="token operator" style="color:#393A34">=</span><span class="token maybe-class-name">InnoDB</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">MyISAM</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="mysql엔진의-구성요소-알아보기">MySQL엔진의 구성요소 알아보기<a class="hash-link" href="#mysql엔진의-구성요소-알아보기" title="Direct link to heading">​</a></h2><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="핸들러-api">핸들러 API<a class="hash-link" href="#핸들러-api" title="Direct link to heading">​</a></h3><p>MySQL엔진의 쿼리 실행기에서 데이터를 쓰거나 읽어야 할 때, 각 스토리지 엔진에 쓰기 또는 읽기를 요청한다.</p><p>이러한 요청을 핸들러(Handler)요청이라고 한다. 여기서 사용되는 API를 핸들러API라고 부른다.</p><p>InnoDB 스토리지 엔진 또한 이 핸들러 API를 이용해 MySQL엔진과 데이터를 주고받는다. 이 핸들러 API를 통해 얼마나 많은 데이터(레코드) 작업이 있었는지는 <code>SHOW GLOBAL STATUS LIKE &#x27;Handler%&#x27;</code></p><p><img loading="lazy" alt="스크린샷 2023-02-22 오전 10.19.57.png" src="/assets/images/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-02-22_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_10.19.57-0639f7a36fec0e08fe85b453d7707396.png" width="559" height="418" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mysql-스레딩-구조">MySQL 스레딩 구조<a class="hash-link" href="#mysql-스레딩-구조" title="Direct link to heading">​</a></h3><p><img loading="lazy" alt="IMG_3427.jpg" src="/assets/images/IMG_3427-16990df0aef5d22bb3f54fef802d1777.jpg" width="2706" height="2045" class="img_ev3q"></p><p>MySQL서버는 프로세스 기반이 아니라 스레드 기반으로 작동한다. </p><p>포그라운드와 백그라운드 스레드로 구분된다.</p><p>MySQL서버에서 실행중인 스레드 목록은 <code>performance_schema</code> 데이터베이스에 threads 테이블을 통해 확인할 수 있다.</p><p><img loading="lazy" alt="스크린샷 2023-02-22 오전 10.31.17.png" src="/assets/images/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-02-22_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_10.31.17-33bcbdcab93e836ac616ba6b580b483b.png" width="958" height="384" class="img_ev3q"></p><p>실제 사용자의 요청을 처리하는 포그라운드 스레드</p><p><img loading="lazy" alt="스크린샷 2023-02-22 오전 10.32.05.png" src="data:image/png;base64,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" width="799" height="20" class="img_ev3q"></p><p>동일한 이름의 스레드가 여러개 보이는 이유는 MySQL 서버의 설정 내용에 의해 동일 작업을 병렬로 처리하는 경우다.</p><aside>💡 여기서의 스레드 모델은 MySQL 서버가 전통적으로 가지고 있던 스레드 모델이며 CE에서 사용되는 모델이다.<p>EE, Percona MySQL 서버에서는 전동적인 스레드 모델뿐만아니라 스레드 풀 모델을 사용할 수 있다.
스레드 풀과 전통적인 스레드 모델의 차이는 포그라운드 스레드와 커넥션의 관계다.</p><p>전통적인 스레드 모델에서는 커넥션별로 포그라운드 스레드가 하나씩 생성되고 할당된다.
스레드풀에서는 커넥션과 포그라운드 스레드는 1:1관계가 아니라 하나의 스레드가 여러개의 커넥션 요청을 전담한다. (4.1.9 스레드 풀 참고)</p></aside><p>새로운 연결을 잡을 때 마다, one_connection이 증가하는 모습</p><p><img loading="lazy" alt="스크린샷 2023-02-22 오전 10.34.20.png" src="/assets/images/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-02-22_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_10.34.20-bb66a62fcffbdeb01c5a1167e2659d8a.png" width="1076" height="611" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4121-포그라운드-스레드클라이언트-스레드">4.1.2.1 포그라운드 스레드(클라이언트 스레드)<a class="hash-link" href="#4121-포그라운드-스레드클라이언트-스레드" title="Direct link to heading">​</a></h3><p><img loading="lazy" alt="제목 없는 다이어그램.png" src="/assets/images/%EC%A0%9C%EB%AA%A9_%EC%97%86%EB%8A%94_%EB%8B%A4%EC%9D%B4%EC%96%B4%EA%B7%B8%EB%9E%A8-740303aae900d02690b50e2cf09affb5.png" width="681" height="281" class="img_ev3q"></p><p>최소한 MySQL 서버에 접속된 클라이언트 수만큼 존재하며, 주로 각 클라이언트 사용자가 요청하는 쿼리 문장을 처리한다.(위 그림 참고)</p><p>클라이언트 사용자가 작업을 마치고 커넥션을 종료하면 해당 커넥션을 담당하던 스레드는 다시 스레드 캐시로 돌아간다.</p><blockquote><p>이때, 스레드 캐시에 일정 개수 이상의 대기중인 스레드가 있다면 스레드 캐시에 넣지 않고 스레드를 종료시켜 일정개수만 캐시에 존재하게 한다.</p></blockquote><p>스레드 캐시에 유지할 수 있는 최대 스레드 개수는 thread_cache_size 시스템 변수로 설정한다.</p><ul><li>이미지 보기<!-- -->  op-in 프로젝트의 경우 thread_cache_size가 9로 설정되어 있다.<!-- -->  <img loading="lazy" alt="Untitled" src="/assets/images/Untitled-7f96c7665f575986acb1ce45b3ec0e90.png" width="692" height="443" class="img_ev3q"></li></ul><p>포그라운드 스레드는 데이터를 MySQL 버퍼나 캐시로부터 가져오며, 버퍼나 캐시에 없는 경우 직접 디스크의 데이터나 인덱스파일로부터 데이터를 읽어와 작업을 처리한다.</p><p><strong>MyISAM 테이블</strong>은 디스크 <strong>쓰기 작업까지 포그라운드 스레드</strong>가 처리하지만 <strong>InnoDB 테이블</strong>은 데이터 <strong>버퍼나 캐시까지만 포그라운드 스레드가 처리하고 나머지 버퍼로부터 디스크까지 기록하는 작업은 백그라운드 스레드</strong>가 처리한다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4122-백그라운드-스레드">4.1.2.2 백그라운드 스레드<a class="hash-link" href="#4122-백그라운드-스레드" title="Direct link to heading">​</a></h3><ul><li>참고자료<!-- -->  <a href="https://cheershennah.tistory.com/168" target="_blank" rel="noopener noreferrer">https://cheershennah.tistory.com/168</a>  <a target="_blank" href="/assets/files/Hwanggyo_kcc2017-90fa954d1ec5fd832dc6c139edcb6305.pdf">Hwanggyo_kcc2017.pdf</a>  <a href="https://m.blog.naver.com/islove8587/221976843118" target="_blank" rel="noopener noreferrer">https://m.blog.naver.com/islove8587/221976843118</a></li></ul><p>MyISAM의 경우 해당사항이 없지만 InnoDB의 경우 다음과 같은 작업이 백그라운드로 처리가 된다.</p><ul><li>인서트 버퍼를 병합하는 스레드</li><li>로그를 디스크로 기록하는 스레드</li><li>InnoDB 버퍼 풀의 데이터를 디스크에 기록하는 스레드</li><li>데이터를 버퍼로 읽어오는 스레드</li><li>잠금이나 데드락을 모니터링하는 스레드</li></ul><p>로그 스레드와 버퍼의 데이터를 디스크로 내려쓰는 작업을 처리하는 쓰기 스레드다.</p><p>MySQL5.5부터 데이터 쓰기 Thread와 읽기 Thread의 개수를 2개 이상 지정할 수 있게 됐으며, innodb_write_io_threads, innodb_read_io_threads 변수로 스레드 개수를 설정한다.</p><p>InnoDB에서도 데이터를 읽는 작업은 주로 클라이언트 스레드에서 처리하기 때문에 일반적인 내장 디스크를 사용할 때는 2~4정도, DAS, SAN과 같은 스토리지를 사용할 때는 디스크를 최적으로 사용할 수 있을 만큼 충분히 설정한느 것도 좋다.</p><p>사용자의 요청을 처리하는 도중 데이터의 쓰기 작업은 지연(버퍼링)되어 처리될 수 있지만 데이터의 읽기 작업은 절대 지연될 수 없다.</p><p>⇒ 일반적인 상용 DBMS에는 대부분 쓰기 작업을 버퍼링해서 일괄 처리하는 기능이 탑재돼있으며, InnoDB또한 이러한 방식으로 처리한다.</p><p>⇒ MyISAM은 그렇지 않고 사용자 스레드가 쓰기 작업까지 함께 처리하도록 되어 있다.</p><p>⇒ InnoDB에서는 INSERT, UDPATE, DELETE 쿼리로 데이터가 변경되는 경우 데이터가 디스크의 데이터 파일로 완전히 저장될 때까지 기다리지 않아도 된다. 하지만 MyISAM에서 일반적인 쿼리는 쓰기 버퍼링 기능을 사용할 수 없다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="413-메모리-할당-및-사용구조">4.1.3 메모리 할당 및 사용구조<a class="hash-link" href="#413-메모리-할당-및-사용구조" title="Direct link to heading">​</a></h3><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 1-7bcdbca29562fc768382065161be688c.png" width="667" height="377" class="img_ev3q"></p><p>글로벌 메모리 영역의 모든 메모리 공간은 MySQL 서버가 시작되면서 운영체제로 부터 할당 된다.</p><p>운영체제가 메모리를 할당하는 방식이 상당히 복잡해서 단순히 MySQL 시스템 변수로 설정한 만큼의 크기를 운영체제로부터 할당받는다고 보자.</p><p><strong>4.1.3.1 글로벌 메모리 영역</strong></p><p><strong>클라이언트 스레드 수와는 무관하게 하나의 메모리 공간만 할당!</strong></p><p>단, 필요에 따라 2개 이상의 메모리 공간을 할당 받을 수 있지만 클라이언트의 스레드 수와는 무관하며, 생성된 글로벌 영역이 N개라 하더라도 모든 스레드에 의해 공유된다.</p><p><strong>구성요소</strong></p><ul><li>테이블 캐시</li><li>InnoDB 버퍼 풀<ul><li><p>128MB</p><p><img loading="lazy" alt="스크린샷 2023-02-25 오후 8.18.03.png" src="/assets/images/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-02-25_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_8.18.03-38ed8d34dd9bfe636acadb12ca04f99f.png" width="1030" height="374" class="img_ev3q"></p></li></ul></li><li>InnoDB 어댑티브 해시 인덱스</li><li>InnoDB 리두 로그 버퍼</li></ul><p><strong>4.1.3.2 로컬 메모리 영역</strong></p><p>세션 메모리 영역이라고도 표현하며, MySQL 서버상에 존재하는 클라이언트 스레드가 쿼리를 처리하는데 사용하는 메모리 영역</p><p>로컬 메모리는 클라이언트 스레드별로 독립적으로 할당되며 절대 공유되어 사용되지 않는다는 특징이 있다.</p><p>쿼리의 용도별로 필요할 때만 공간이 할당되고 필요하지 않은 경우에는 MySQL이 메모리공간을 할당조차도 하지 않을 수 있다.</p><ul><li>대표적으로<ul><li>소트 버퍼, 조인 버퍼</li></ul></li></ul><p>커넥션이 열려있는 동안 계속 할당된 상태로 남아있는 공간(커넥션 버퍼, 결과 버퍼)</p><p> 그렇지 않고 쿼리를 실행하는 순간에만 할당했다가 해지하는 공간(조인버퍼, 소트 버퍼)이 있다.</p><ul><li>영역<ul><li>정렬 버퍼</li><li>조인 버퍼</li><li>바이너리 로그 캐시</li><li>네트워크 버퍼</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="414-플러그인-스토리지-엔진-모델">4.1.4 플러그인 스토리지 엔진 모델<a class="hash-link" href="#414-플러그인-스토리지-엔진-모델" title="Direct link to heading">​</a></h3><p><img loading="lazy" alt="KakaoTalk_20230223_112939952.jpg" src="/assets/images/KakaoTalk_20230223_112939952-544b1e6065717e7f1e56b06dbcf19323.jpg" width="1440" height="929" class="img_ev3q"></p><p>MySQL의 독특한 구조 중 대표적인 것이 *<strong>*플러그인 모델**</strong></p><p>플러그인해서 사용할 수 있는 것이 스토리지 엔진만 있는 것은 아니다. </p><ul><li>전문 검색엔진을 위한 검색어 파서(인덱싱할 키워드를 분리해내는 작업)</li><li>사용자 인증을 위한 Native Authentication, Cache SHA-2 Authentication 등도 플러그인</li></ul><p>MySQL은 이미 기본적으로 제공되는 스토리지 엔진이 많다.</p><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 2-e9b214b75b935a58fce71703e44e6855.png" width="959" height="263" class="img_ev3q"></p><p><img loading="lazy" alt="KakaoTalk_20230223_112940514.jpg" src="/assets/images/KakaoTalk_20230223_112940514-9bf90d1c231dfac651947e6d7d71f155.jpg" width="1440" height="364" class="img_ev3q"></p><p>MySQL에서 쿼리가 실행되는 과정을 크게 그림 4.5와 같이 나눈다면 거의 대부분 작업이 MySQL엔진에서 이루어지고 마지막 <code>데이터 읽기/쓰기 작업</code>만 스토리지 엔진에 의해 처리된다.</p><ul><li>핸들러에 대해 이해하기<!-- -->  MySQL을 사용하다보면 handler라는 단어를 자주 접하게 되는데 핸들러라는 단어는 MySQL서버의 소스코드로 부터 넘어온 표현<!-- -->  MySQL 서버에서 MySQL엔진은 사람 역할을 하고 각 스토리지 엔진은 자동차 역할을 하는데, MySQL엔진이 스토리지 엔진을 조정하기 위해 핸들러라는 것을 사용하게 됨<!-- -->  최소한 MySQL 엔진이 각 스토리지 엔진에 데이터를 읽어오거나 저장하도록 명령하려면 반드시 핸들러를 거쳐야 하는 점을 기억하자.<!-- -->  나중에 MySQL 서버의 상태 변수를 배우게 될 텐데 ‘Handler_’로 시작하는 것이 많다는 걸 알 수 있다.<!-- -->  <code>handler_</code> 로 시작하는 상태변수는  MySQL 엔진이 각 스토리지 엔진에게 보낸 명령어 횟수를 의미하는 변수<!-- -->  실질적인 Group By나 Order By 등 복잡한 처리는 스토리지 엔진이 아닌 MySQL엔진(쿼리 실행기)에서 처리한다.
</li></ul><p><strong>MyISAM이나 InnoDB 스토리지 엔진 가운데 뭘 사용하든 복잡한 쿼리 처리는 MySQL엔진에서 담당하는데 별 차이가 없는게 아닌가?</strong></p><p>단순히 보이는 <code>데이터 읽기/쓰기</code> 작업 처리방식이 얼마나 달라질 수 있는지 뒤에서 나옴.</p><p><code>**하나의 쿼리작업</code> 은 여러 하위작업으로 나뉜다. 각 하위작업이 MySQL엔진 영역에서 처리되는지, 스토리지 엔진 영역에서 처리되는지 구분할 줄 알아야한다.**</p><p><strong>지원하는 플러그인</strong></p><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 3-f50e6ff5d6992b21557273978f519974.png" width="723" height="329" class="img_ev3q"></p><p>SQL 서버에 포함되지 않은 스토리지 엔진을 사용하려면 MySQL 서버를 다시 빌드(컴파일)해야 한다.</p><p>하지만 적절히 준비가 되어있다면 플러그인 형태로 빌드된 스토리지 엔진을 다운로드해 끼워넣기만 하면 쓸 수 있다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="415-컴포넌트">4.1.5 컴포넌트<a class="hash-link" href="#415-컴포넌트" title="Direct link to heading">​</a></h3><p>MySQL 8.0 부터는 기존의 플러그인 아키텍쳐를 대체하기 위해 컴포넌트 아키텍처가 지원된다.</p><ul><li>MySQL 서버의 플러그인 단점<ul><li>플러그인은 오로지 MySQL 서버와 인터페이스할 수 있고, 플러그인끼리는 통신이 불가능</li><li>플러그인은 MySQL 서버의 변수나 함수를 직접 호출하기 때문에 안전하지 X (캡슐화 불가)</li><li>플러그인은 상호 의존 관계를 설정할 수 없어서 초기화가 어려움</li></ul></li></ul><p><img loading="lazy" alt="Untitled" src="/assets/images/Untitled 4-5b347370d1d162302a73f5c91ecba35c.png" width="649" height="178" class="img_ev3q"></p><p><img loading="lazy" alt="스크린샷 2023-02-25 오후 8.40.53.png" src="/assets/images/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-02-25_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_8.40.53-66ae067e2beb5d8a103269770eaf4d07.png" width="1282" height="554" class="img_ev3q"></p><blockquote><p>컴포넌트도 설치하면서 시스템 변수를 설정할 수 있으니 사용하기전 메뉴얼을 읽고 쓰자!</p></blockquote><p><img loading="lazy" alt="스크린샷 2023-02-25 오후 8.42.16.png" src="/assets/images/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-02-25_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_8.42.16-f42966fc22a574b3804670de41af79e3.png" width="950" height="78" class="img_ev3q"></p><p><img loading="lazy" alt="스크린샷 2023-02-25 오후 8.43.11.png" src="/assets/images/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-02-25_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_8.43.11-b208029a1d6500a37fd14f5d15ec6f83.png" width="1118" height="758" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="416-쿼리-실행구조">4.1.6 쿼리 실행구조<a class="hash-link" href="#416-쿼리-실행구조" title="Direct link to heading">​</a></h3><p><img loading="lazy" alt="KakaoTalk_20230223_120217453.jpg" src="/assets/images/KakaoTalk_20230223_120217453-9ba981149f2480c7fc1f1505eaeb5204.jpg" width="1440" height="1186" class="img_ev3q"></p><p><strong>4.1.6.1 쿼리 파서</strong></p><ul><li>사용자의 요청으로 들어온 쿼리 문장을 토큰으로 분리해 트리형태의 구조로 만들어 냄</li></ul><blockquote><p>토큰: MySQL이 인식할 수 있는 최소단위의 어휘나 기호</p></blockquote><p><strong>4.1.6.2 전처리기</strong></p><p>파서 과정에서 만들어진 파서 트리를 기반으로 쿼리 문장에 구조적인 문제점이 있는지 확인</p><p>토큰을 테이블 이름이나 컬럼이름, 내장함수와 같은 개체를 매핑해 해당 객체의 존재여부와 객체의 접근 권한 등을 확인하는 과정</p><p>실제 존재하지 않거나 권한상 사용할 수 없는 개체의 토큰은 이 단계에서 걸러진다.</p><p><strong>4.1.6.3 옵티마이저</strong></p><p>사용자의 요청으로 들어온 쿼리 문장을 저렴한 비용으로 가장 빠르게 처리할지를 결정하는 역할</p><p>DBMS의 두뇌에 해당</p><p><strong>4.1.6.4 실행엔진</strong></p><p>실행엔진과 핸들러는 손과 발에 비유</p><p>실행엔진이 하는 일을 쉽게 예를 들자.</p><ul><li>옵티마이저가 GROUP BY를 처리하기 위해 임시 테이블을 사용하기로 결정<ol><li>실행엔진이 핸들러에게 임시 테이블을 만들라고 요청</li><li>실행엔진은 where 절에 일치하는 레코드를 읽어오라고 핸들러에게 요청</li><li>읽어온 레코드들을 1번에서 준비한 임시테이블에 저장하라고 핸들러에게 요청</li><li>데이터가 준비된 임시 테이블에서 필요한 방식으로 데이터를 읽어오라고 핸들러에게 요청</li><li>최종적으로 실행엔진은 결과를 사용자나 다른 모듈로 넘김</li></ol></li></ul><p><strong>4.1.6.5 핸들러(스토리지 엔진)</strong></p><p>MySQL 서버의 가장 밑단에서 실행엔진의 요청에 따라 데이터를 디스크로 저장하고 디스크로부터 읽어오는 역할을 담당</p><p>핸들러는 결국 스토리지 엔진을 의미, MyISAM 테이블을 조작하는 경우에 핸들러가 MyISAM 스토리지 엔진이 되고 InnoDB 테이블을 조작할 때, 핸들러는 InnoDB 스토리지 엔진이 된다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="417-복제">4.1.7 복제<a class="hash-link" href="#417-복제" title="Direct link to heading">​</a></h3><p>MySQL서버에서 매우 중요한 역할을 담당</p><p>16장에서 살펴보기(2장)</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="418-쿼리-캐시mysql-80에서부터-제거">4.1.8 쿼리 캐시<!-- -->[MySQL 8.0에서부터 제거]<a class="hash-link" href="#418-쿼리-캐시mysql-80에서부터-제거" title="Direct link to heading">​</a></h3><p>MySQL 서버에서 쿼리 캐시(Query Cache)는 빠른 응답을 필요로하는 웹 기반의 응용 프로그램에서 매우 중요한 역할을 담당했다.</p><p>쿼리 캐시는 SQL의 실행결과를 메모리에 캐시하고 동일 SQL 쿼리가 실행되면 테이블을 읽지 않고 즉시 결과를 반환하기 때문에 매우 빠른 성능을 보였다.</p><p>쿼리 캐시는 테이블의 데이터가 변경되면 캐시에 저장된 결과 중에서 변경된 테이블과 관련된 것들은 모두 삭제해야 했다. 이는 심각한 동시처리 성능 저하를 유발한다.</p><p>MySQL 서버가 발전하면서 성능이 개선되는 과정에서 쿼리 캐시는 계속된 동시처리 성능 저하와 많은 버그의 원인이 되기도 했다.</p><p>⇒ 결국 MySQL 8.0 부터는 쿼리캐시는 서버 기능에서 완전히 제거되고 관련된 시스템 변수도 모두 제거됐다.</p><p>MySQL 서버의 쿼리캐시 기능은 아주 독특한 환경에서는 매우 훌륭한 기능이었지만 실제로 그럴만한 서비스는 거의 없었다. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="419-스레드-풀">4.1.9 스레드 풀<a class="hash-link" href="#419-스레드-풀" title="Direct link to heading">​</a></h3><p>MySQL 서버 EE에서는 스레드 풀 기능을 제공하지만 CE에서는 스레드풀 기능을 제공하지 않는다.</p><p>MySQL EE에 포함된 스레드 풀 대신 Percona 스레드 풀을 알아보자</p><p>Percona 스레드 풀은 플러그인 형태로 작동하게 구현되어 있다. MySQL CE 서버에서도 스레드 풀 기능을 사용하고자 한다면 동일 버전의 Percona Server에서 스레드 풀 플러그인 라이브러리(thread_pool.so)를 MySQL 커뮤니티 에디션 서버에 설치해 사용하면 된다.(install plugin)</p><p>스레드 풀은 내부적으로 사용자의 요청을 처리하는 스레드의 개수를 줄여 동시 처리되는 요청이 많다하더라도 MySQL 서버의 CPU가 제한된 개수의 스레드 처리에만 집중할 수 있게 해서 서버의 자원 소모를 줄이는 목적이다.</p><p>스레드 풀을 설정했다고 해서 엄청난 성능의 효과는 드물다.</p><p>동시에 실행중인 스레드들을 CPU가 최대한 잘 처리해낼 수 있는 수준으로 줄여서 빨리 처리하게 하는 기능이기 때문에 스케쥴링 과정에서 CPU 시간을 제대로 확보하지 못하는 경우에는 쿼리 처리가 더 느려지는 사례도 발생할 수 있다.</p><p>제한된 수의 스레드만으로 CPU가 처리하도록 적절히 유도하면 CPU의 프로세서 친화도도 높이고 운영체제에서 불필요한 컨텍스트 스위치를 줄여 오버해드를 낮출 수 있다.</p><p>Percona Server의 스레드 풀은 기본적으로 CPU 코어 개수만큼 스레드 그룹을 생성하는데, 스레드 그룹의 개수는 thread_pool_size 시스템 변수를 변경해서 조정할 수 있다. 일반적으로는 CPU 코어의 개수와 맞추는것이 CPU 프로세서 친화도를 높이는데 좋다</p><p>MySQL 서버가 처리해야할 요청이 생기면 스레드풀로 처리를 이관하는데, 만약 스레드 풀이 처리중인 작업이 있는 경우에는 thread_pool_oversubscribe 시스템 변수에 설정된 개수만큼 추가로 더 받아들여서 처리한다. 이 값이 너무 크면 스케쥴링해야할 스레드가 많아져 스레드 풀이 비효율적으로 동작할 수 있다.</p><p>스레드 그룹의 모든 스레드가 일을 처리하고 있다면 스레드 풀은 해당 스레드 그룹에 새로운 작업 스레드를 추가할 지, 기존 작업 스레드가 처리를 완료할 때까지 기다릴 지 여부를 판단해야한다.</p><p>스레드 풀의 타이머 스레드는 주기적으로 스레드 그룹의 상태를 체크해서 thread_pool_stall_limit 시스템 변수에 정의된 밀리초만큼 작업 스레드가 지금 처리중인 작업을 끝내지못하면 새로운 스레드를 생성해서 스레드 그룹에 추가한다. 이때, 전체 스레드 풀에 있는 스레드의 개수는</p><p>thread_pool_max_threads 시스템 변수에 설정된 개수를 넘을 수 없다. 즉, 모든 스레드 그룹의 스레드 stall_limit 시간동안 기다려야만 새로 들어온 요청을 처리할 수 있다는 뜻이다. 따라서 응답시간에 아주 민감한 서비스라면 thread_pool_stall_limit 시스템 변수를 적절히 낮춰서 설정해야한다. 그렇다고 0에 가까운 값으로 설정하는 건 권장하지 않는다. 0에 가까운 값이면 스레드풀을 사용하지 않는편이 낫다.</p><p>Percona Server의 스레드 풀 플러그인은 선순위 큐와 후순위 큐를 이용해 특정 트랜잭션이나 쿼리를 우선적으로 처리할 수 있는 기능도 제공한다. 이렇게 먼저 시작된 트랜잭션 내에 속한 SQL을 빨리 처리해주면 해당 트랜잭션이 가지고 있던 잠금이 빨리 해제되고 잠금 경합을 낮춰서 전체적인 처리 성능을 향상시킬 수 있다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4110-트랜잭션-지원-메타데이터">4.1.10 트랜잭션 지원 메타데이터<a class="hash-link" href="#4110-트랜잭션-지원-메타데이터" title="Direct link to heading">​</a></h3><p>테이블의 구조 정보, 스토어드 프로그램 등의 정보를 데이터 딕셔너리 or 메타데이터라고 한다.</p><p>MySQL 5.7까지 테이블 구조를 FRM 파일에 저장, 스토어드 프로그램 또한 TRN,TRG,PAR 기반으로 관리</p><p>파일기반의 메타데이터는 생성 및 변경작업이 트랜젝션을 지원하지 않기 때문에 테이블의 생성 또는 변경 도중 MySQL 서버가 비정상적으로 종료되면 일관되지 않은 상태로 남는 문제가 발생 ⇒ 데이터 베이스나 테이블이 깨졌다고 표현한다.</p><p>MySQL 8.0 버전부터는 이러한 문제를 해결하기 위해 테이블의 구조 정보나 스토어드 프로그램의 코드 관련 정보를 모두 innoDB 테이블에 저장하도록 개선됐다.</p><p><del>MySQL 서버가 작동하는데 기본적으로 필요한 테이블들을 묶어서 시스템 테이블이라고 하는데 대표적으로 사용자 인증과 관한에 관련된 테이블들이 있다.</del></p><p>MySQL 8.0 버전부터는 이런 시스템 테이블들을 모두 InnoDB스토리지 엔진을 사용하도록 개선됐고 시스템 테이블과 데이터 딕셔너리 정보를 모두 모아 mysql DB에 저장하고 있다.</p><p>mysql DB는 통째로 mysql.ibd 이름의 테이블 스페이스에 저장된다. 그래서 MySQL 서버의 데이터 딕렉터리에 존재하는 mysql.ibd라는 파일은 다른 *.ibd 파일과 함께 특별히 주의해야한다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="질문">질문<a class="hash-link" href="#질문" title="Direct link to heading">​</a></h3><ol><li>MSA구조로 간다면 서버는 1개고 DB를 독립적으로 가져가야 하는 지, 서버마저 여러개로 가져가야 하는지?</li></ol><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   ubuntu </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> mysql server1 </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> database</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                    </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> database</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> mysql server2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                    </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> database</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                    </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token parameter">database</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> server 접속하려는 connection 제한</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> master</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> slave에서 slave 읽기</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> master </span><span class="token function" style="color:#d73a49">쓰기</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">replication 구조</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol><li><p>MAX Connection을 늘리게 되면 DBMS에 어떤 문제가 발생할 수 있는지?</p><ul><li>현재 로컬의 SIZE<!-- -->  <img loading="lazy" alt="스크린샷 2023-02-25 오후 8.02.26.png" src="/assets/images/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-02-25_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_8.02.26-bd7dc48fa0861157daa81f26dc15646d.png" width="1034" height="396" class="img_ev3q"></li></ul></li><li><p>커넥션 풀이 꽉 차게되면 타임아웃으로 걸거나 서킷(?)을 해야하나</p><ul><li><a href="https://hi-dot.tistory.com/33" target="_blank" rel="noopener noreferrer">https://hi-dot.tistory.com/33</a></li><li><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#application-properties.server" target="_blank" rel="noopener noreferrer">https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#application-properties.server</a></li><li><a href="https://www.youtube.com/watch?v=52t9DlwmqJI" target="_blank" rel="noopener noreferrer">https://www.youtube.com/watch?v=52t9DlwmqJI</a> <!-- -->[4분 10초 - 5분 ]</li></ul></li><li><p>MSA로 관리되는 서버마다 DB에 접근할 때, 공통으로 사용되는 건 캐시로 관리하는 게 맞나? 그렇다면 사례는?</p><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token constant" style="color:#36acaa">DB</span><span class="token plain">는 해당하는 서버랑만 연결해서 통신</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="참고">참고<a class="hash-link" href="#참고" title="Direct link to heading">​</a></h3><p>realmysql 8.0</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/my-sql">MySQL</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/djunnni/djunnni.github.io/tree/main/docs/database/1. 아키텍쳐.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/category/데이터베이스"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">데이터베이스</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/category/네트워크"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">네트워크</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#mysql의-구성도" class="table-of-contents__link toc-highlight">MySQL의 구성도</a></li><li><a href="#mysql-엔진" class="table-of-contents__link toc-highlight">MySQL 엔진</a></li><li><a href="#스토리지-엔진" class="table-of-contents__link toc-highlight">스토리지 엔진</a></li><li><a href="#mysql엔진의-구성요소-알아보기" class="table-of-contents__link toc-highlight">MySQL엔진의 구성요소 알아보기</a><ul><li><a href="#핸들러-api" class="table-of-contents__link toc-highlight">핸들러 API</a></li><li><a href="#mysql-스레딩-구조" class="table-of-contents__link toc-highlight">MySQL 스레딩 구조</a></li><li><a href="#4121-포그라운드-스레드클라이언트-스레드" class="table-of-contents__link toc-highlight">4.1.2.1 포그라운드 스레드(클라이언트 스레드)</a></li><li><a href="#4122-백그라운드-스레드" class="table-of-contents__link toc-highlight">4.1.2.2 백그라운드 스레드</a></li><li><a href="#413-메모리-할당-및-사용구조" class="table-of-contents__link toc-highlight">4.1.3 메모리 할당 및 사용구조</a></li><li><a href="#414-플러그인-스토리지-엔진-모델" class="table-of-contents__link toc-highlight">4.1.4 플러그인 스토리지 엔진 모델</a></li><li><a href="#415-컴포넌트" class="table-of-contents__link toc-highlight">4.1.5 컴포넌트</a></li><li><a href="#416-쿼리-실행구조" class="table-of-contents__link toc-highlight">4.1.6 쿼리 실행구조</a></li><li><a href="#417-복제" class="table-of-contents__link toc-highlight">4.1.7 복제</a></li><li><a href="#418-쿼리-캐시mysql-80에서부터-제거" class="table-of-contents__link toc-highlight">4.1.8 쿼리 캐시MySQL 8.0에서부터 제거</a></li><li><a href="#419-스레드-풀" class="table-of-contents__link toc-highlight">4.1.9 스레드 풀</a></li><li><a href="#4110-트랜잭션-지원-메타데이터" class="table-of-contents__link toc-highlight">4.1.10 트랜잭션 지원 메타데이터</a></li><li><a href="#질문" class="table-of-contents__link toc-highlight">질문</a></li><li><a href="#참고" class="table-of-contents__link toc-highlight">참고</a></li></ul></li></ul></div></div></div></div></main></div></div></div>
<script src="/assets/js/runtime~main.e1836221.js"></script>
<script src="/assets/js/main.d730b149.js"></script>
</body>
</html>